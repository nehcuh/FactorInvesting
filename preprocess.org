#+TITLE: 数据与流程

* 数据来源

可用的免费数据源有 QUANTAXIS，掘金量化，爬虫

* 量价数据处理

** 1. 前复权与后复权

由于股票存在配股，分拆，合并和发放股息等时间，会导致股价出现比较大的缺口，对收益率的计算会带来比较大的
影响。为了对历史进行真实还原，在对应历史时刻，如果要进行买入操作，最佳的方式是使用当时的实际价格，同时
为了计算之后的收益率又避免因为除权除息带来的影响，可以以考察时点为定点，往后进行复权处理。

** 2. 长期停牌股复牌

重大重组和暂停上市后恢复等原因，部分停牌股票复牌后没有涨跌停限制，对应改日的收益率异常大或者异常小。另
外，对于被 ST 的股票，其涨跌停限制为 $\pm5\%$.

我国证券市场现行涨跌停板制度于 1996 年 12 月 13 日发布并于 1996 年 12 月 16 日开始施行，因此，可以
对 1996 年 12 月 15 日以后的数据中出现的异常值做压缩处理，具体操作中，可将大于 $10\%$ 的数据用 $10\%$
代替，将小于 $-10\%$ 数据用 $-10\%$ 代替。

** 3. 填充值

停牌时没有交易数据，如果计算个股动量时，直接以前值进行填充是没有问题的；但是如果要计算历史收益率的波动率，
前值填充会导致停牌日收益率波动率为零，这样会导致历史波动率被低估。因此，最好的方式还是按照实际情况进行分析。

** 4. 最少交易日

一般要求当有效样本数超过时间窗口的 2/3 时，才进行对应的计算。

* 财务数据处理

** 1. 报告期

一般要求上市企业一年定期披露四次财报，分别是一季报，半年报，三季报和年报。
#+NAME: 财务报告期
| 报告期 | 起始点    | 结束点      | 常用标签 | 最晚披露日       |
|--------+-----------+-------------+----------+------------------|
| 一季报 | 1 月 1 日 | 3 月 31 日  | XXXX0331 | 同年 4 月 30 日  |
| 半年报 | 1 月 1 日 | 6 月 30 日  | XXXX0630 | 同年 8 月 31 日  |
| 三季报 | 1 月 1 日 | 9 月 30 日  | XXXX0930 | 童年 10 月 31 日 |
| 年报   | 1 月 1 日 | 12 月 31 日 | XXXX1231 | 次年 4 月 30 日  |

** 2. 财务报表

#+NAME: 四表一附注
|------------------+--------------------------------------------------------------+----------|
| 表名             | 含义                                                         | 特点     |
|------------------+--------------------------------------------------------------+----------|
| 资产负债表       | 反映企业在一定日期 (通常为各会计期末)                        | 时点数据 |
|------------------+--------------------------------------------------------------+----------|
| 利润表           | 反映企业在一定时期经营成果 (盈利或亏损) 和利润分配情况       | 区间数据 |
|------------------+--------------------------------------------------------------+----------|
| 现金流量表       | 反映企业资产负债表中各个项目对现金流的影响，分位经营，投资   | 区间数据 |
|                  | 和融资三个类别                                               |          |
|------------------+--------------------------------------------------------------+----------|
| 所有者权益变动表 | 反映企业期初到期末所有者权益的增减情况                       | 区间数据 |
|------------------+--------------------------------------------------------------+----------|
| 附注             | 财务报表附注旨在帮助财务报表使用者深入了解基本财务报表内容， | 区间数据 |
|                  | 是财务报表制作者对资产负债表，利润表和现金流量表的有关内容   |          |
|                  | 和项目所作的说明和解释。财务报表附注中的内容非常重要和现金   |          |
|                  | 流量表的有关内容和项目所作的说明和解释。财务报表附注中的内   |          |
|                  | 容非常重要，主要包括：企业所采用主要的会计处理方法；会计处   |          |
|                  | 理方法的变更情况，变更原因以及对财务状况和经营业绩的影响；   |          |
|                  | 发生的非经营项目；期后事项；其他对理解和分析财务报表重要     |          |
|                  | 的信息                                                       |          |
|------------------+--------------------------------------------------------------+----------|

** 3. 基准报告期

在披露最新报告期财务报表时，会同时披露对应的某个历史基准报表。不同报表对应的基准报表不同，资产负债表
对应上年年报，不论资产负债表对应的是一季报，半年报，三季报还是年报。利润表和现金流量表则对应同比报告期。

#+NAME: 基准报告期
|------------+------------+------------+------------|
| 最新报告期 | 资产负债表 | 利润表     | 现金流量表 |
|------------+------------+------------+------------|
| 一季报     | 上年年报   | 上年一季报 | 上年一级报 |
| 半年报     | 上年年报   | 上年半年报 | 上年半年报 |
| 三季报     | 上年年报   | 上年三季报 | 上年三季报 |
| 年报       | 上年年报   | 上年年报   | 上年年报   |
|------------+------------+------------+------------|

** 4. 调整和更正

财务报表披露后，由于某些原因可能会进行一些修正，更改原始的科目数值。按照时间频率分类，修正可以分为调整
和不定期更正。财务报表第一次披露时的值称为原始报表；在后续定期报告中再次披露基准报表时，如果基准报表与
原始报表科目数值出现差异，则发生了调整。不定期更正指的是，由于会计政策变更或者会计统计差错等原因，对之
前某期的报告进行更正。

** 5. 基本原则

实证资产定价研究和因子投资是非常精细的过程，因而需要遵循以下原则：在当前时点利用可得的最新信息，按照这
个原则，既能保证充分利用最新数据，也可以避免使用未来数据。

** 6. 数据存储

底层报表同一个报告期可能存在多条记录，分属于以下四类：类型1-初始报表 (最新值), 类型2-基准报表 (最新值),
类型3-初始报表 (原始值), 类型4-基准报表 (原始值).
